<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wykuwator 3000</title>
    <!-- Firebase App (core) -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<!-- Firebase Auth -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<!-- Firebase Firestore -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<link id="main-style" rel="stylesheet" href="styles.css">
</head>
<body>
<h1 id="title">
  <p class="page-title"><i class="fas fa-cloud-moon"></i>   Wykuwator 3000  <i class="fas fa-cloud-moon"></i>
  </p>
  <p class="subtitle">wersja beta 1.2</p>
</h1>
<div id="homeButton" class="home-button">üè†</div>
<div id="leaderboard-container">
  <h3>üèÜ Leaderboard</h3>
  <table id="leaderboard-table"></table>
</div>
<div id="user-info" class="user-info"></div>
<c-c>cc:francesco2137, all rights reserved</c-c>
<div id="firebase-login" style="text-align:center;">
  <div id="login-register-choice">
    <button id="choose-login-btn">Logowanie</button>
    <button id="choose-register-btn">Rejestracja</button>
  </div>
  <form id="login-form" style="display:none;">
    <h2>Zaloguj siƒô</h2>
    <input type="email" id="login-email" placeholder="Email"><br>
    <input type="password" id="login-password" placeholder="Has≈Ço"><br>
    <button type="button" id="login-btn">Zaloguj</button>
    <button type="button" id="login-back-btn">Cofnij</button>
    <div id="login-error" style="color:red;"></div>
  </form>
  <form id="register-form" style="display:none;">
    <h2>Rejestracja</h2>
    <input type="text" id="register-username" placeholder="Nazwa u≈ºytkownika"><br>
    <input type="email" id="register-email" placeholder="Email"><br>
    <input type="password" id="register-password" placeholder="Has≈Ço"><br>
    <button type="button" id="register-btn">Zarejestruj</button>
    <div id="register-error" style="color:red;"></div>
  </form>
</div>
<!-- Wyb√≥r trybu -->
<div class="blok menutryb" style="text-align:center;">
  <h2 class="diva">Wybierz tryb</h2>
  <div id="mode-select">
    <button class="button trybowe" id="mode-flashcards-btn">Fiszki</button>
    <button class="button trybowe" id="mode-tryb2-btn">Sortowanie wydarze≈Ñ</button>
  </div>
</div>

<!-- Menu dla trybu 2 (na poczƒÖtek proste) -->


<!-- Sekcja gry trybu 2 -->
<div id="tryb2-game" class="blok t2" style="display:none;">
  <h2>U≈Ç√≥≈º wydarzenia chronologicznie</h2>
  <div id="tryb2-events-list"></div>
  <button class="button" id="check-tryb2-btn">Sprawd≈∫</button>
  <div id="tryb2-result"></div>
  <button class="button" id="back-to-menu-tryb2" style="display:none;" onclick="returnToMenu()">Powr√≥t</button>
</div>
<div class="blok menu menu-main wspolne">
    <h2>Wybierz Grupƒô</h2><br><label><input type="radio" name="group" value="all" checked> Wszystkie</label>
    <label><input type="radio" name="group" value="pl"> Polska</label>
    <label><input type="radio" name="group" value="world"> Europa i ≈öwiat</label> 
    <details><summary>Wiƒôcej</summary><div id="innekraje"><h3>Wybierz Kraj</h3>
    <br><label><input type="checkbox" name="country" value="pl"> Polska</label>
    <br><label><input type="checkbox" name="country" value="de"> Niemcy</label>
    <br><label><input type="checkbox" name="country" value="uk"> Wielka Brytania</label>
    <br><label><input type="checkbox" name="country" value="fr"> Francja</label>
    <br><label><input type="checkbox" name="country" value="us"> USA</label>
    <br><label><input type="checkbox" name="country" value="it"> W≈Çochy, Rzym</label>
    <br><label><input type="checkbox" name="country" value="gr"> Grecja</label>
    <br><label><input type="checkbox" name="country" value="ru"> Rosja</label>
    <br><label><input type="checkbox" name="country" value="ko"> Ko≈õci√≥≈Ç</label>
    <br><label><input type="checkbox" name="country" value="at"> Austria</label>
    <br><label><input type="checkbox" name="country" value="tu"> Turcja</label>
    <br><label><input type="checkbox" name="country" value="hu"> Wƒôgry</label>
    <br><label><input type="checkbox" name="country" value="cz"> Czechy</label>
    <br><label><input type="checkbox" name="country" value="es"> Hiszpania</label>
    <br><label><input type="checkbox" name="country" value="lt"> Litwa</label>
    <br><label><input type="checkbox" name="country" value="se"> Szwecja</label>
    <br><label><input type="checkbox" name="country" value="re"> Reszta ≈öwiata</label>
     </div></details>
    </div>
<!-- ...poczƒÖtek pliku bez zmian... -->
<div class="blok epoki menu-main wspolne">
   <h2>Wybierz Epokƒô</h2>
   <label>
     <input type="checkbox" name="era" value="st"> Staro≈ºytno≈õƒá
     <span class="epoka-daty">10 tys. p.n.e - 476 n.e</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="sm"> ≈öredniowiecze
     <span class="epoka-daty">477 - 1491</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="xvi"> XVI wiek
     <span class="epoka-daty">1492 - 1599</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="xvii"> XVII wiek
     <span class="epoka-daty">1600 - 1699</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="xviii"> XVIII wiek
     <span class="epoka-daty">1700 - 1788</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="nap"> Epoka Napoleo≈Ñska
     <span class="epoka-daty">1789 - 1815</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="xix"> XIX wiek
     <span class="epoka-daty">1816 - 1913</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="ww1"> I wojna ≈õwiatowa
     <span class="epoka-daty">1914 - 1918</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="mw"> 20-lecie miƒôdzywojenne
     <span class="epoka-daty">1919 - 1938</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="ww2"> II wojna ≈õwiatowa
     <span class="epoka-daty">1939 - 1945</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="pw"> Powojnie
     <span class="epoka-daty">1946 - 1988</span>
   </label>
   <label>
     <input type="checkbox" name="era" value="ff"> Najnowsza
     <span class="epoka-daty">1989 - teraz</span>
   </label>
</div>

<!-- Zakres lat -->
<div class="blok year-range menu-main wspolne">
  <h3>Zakres lat</h3>
  <input type="number" id="year-from" placeholder="Od roku">
  <input type="number" id="year-to" placeholder="Do roku">
</div>
<div class="blok error-margin menu-main fiszki-only" style="display:none;">
  <label>
    <input type="checkbox" id="enable-error-margin"> Tryb marginesu b≈Çƒôdu (nie liczy siƒô do leaderboardu)
  </label>
  <input type="number" id="error-margin-value" placeholder="Margines b≈Çƒôdu (w latach)" min="0" disabled>
</div>
<!-- ...reszta pliku bez zmian... -->
    </div>
    <div class="blok sortowanie menu-main fiszki-only" style="display:none;">
    <h2>Sortowanie</h2><br>
    <label>
        <input type="radio" name="sort" value="chronological" checked>
        Chronologicznie
    </label>
    <label>
        <input type="radio" name="sort" value="random">
        Losowo
    </label>
    </div>
        
    <div class="blok dif menu-main wspolne">
      <h3 class="opcjonalne">Opcjonalne:</h3>
    <h3>Poziom trudno≈õci</h3><br><h4> (zaznacz wszystkie po≈ºƒÖdane)</h4><br>
    <label>
        <input type="checkbox" name="difficulty" value="1"> Poziom podstawowy
    </label><br>
    <label>
        <input type="checkbox" name="difficulty" value="2"> Poziom rozszerzony
    </label><br>
    <label>
        <input type="checkbox" name="difficulty" value="3"> Poziom ponadrozszerzony
    </label>
</div>
    <div class="blok dif2 menu-main wspolne">    <h3>Wyb√≥r typu</h3>
    <form id="flashcardTypeForm">
        <label><input type="checkbox" name="type" value="po"> polityczne</label><br>
        <label><input type="checkbox" name="type" value="bi"> wojny, bitwy, etc.</label><br>
        <label><input type="checkbox" name="type" value="sk"> spo≈Çeczno-kulturowe</label><br>
        <label><input type="checkbox" name="type" value="pa"> panowanie w≈Çadc√≥w</label><br>
    </form></div>
<div id="no-flashcards-message" style="display:none; color:#c0392b; font-weight:bold; margin:20px 0; font-size:1.2em; text-align:center;">
    Brak fiszek dla wybranej kombinacji filtr√≥w!
</div>

   <div class="ni fiszki-only menu-main" style="display:none;">
    <br><button class="button" onclick="startFlashcards('eventToDate')" id="start">start</button>
    <br><button id="advancedOptionsButton" class="button">opcje zaawansowane</button><br><h4-c>indev</h4-c> <br>
    <br><button class="button" id="back-to-menu-tryb1">Powr√≥t</button>

<div id="advancedOptionsMenu" class="advanced-options hidden">

    <h3> Czas wy≈õwietlania odpowiedzi</h3>
    <div class="timeout-options">
    
    
    <!-- Opcja domy≈õlna -->
    <label>
        <input type="radio" name="timeoutMode" value="default" checked> Domy≈õlny timeout
    </label><br>
    <!-- Opcja z ustawianiem czasu -->
    <label>
        <input type="radio" name="timeoutMode" value="custom"> Wpisz w≈Çasny timeout (w sekundach)
    </label>
    <input type="number" id="customTimeout" placeholder="Sekundy" min="1" disabled>
</div><label>
  <input type="radio" id="optionalNextButton">
  Przycisk ‚ÄûPrzejd≈∫ do nastƒôpnej‚Äù po odpowiedzi (tryb nauki)
</label><br>
</div></div>





<div class="menu-tryb2 blok t2" style="display:none;">
  <h2 class="sybau">Sortowanie choronologicznie</h2>
  <p class="sybau">Twoim zadaniem bƒôdzie u≈Ço≈ºyƒá wydarzenia w kolejno≈õci chronologicznej.</p>
  <div id="chronology-settings" style="display:none;">
  <label>Ile zestaw√≥w do sortowania w tej sesji? 
    <input type="number" id="chronology-count" min="1" max="20" value="5">
  </label>
  <button class="button" id="chronology-confirm-btn">Rozpocznij sortowanie</button>
</div>
  <br><button class="button sybau" id="start-chronology-btn">Start</button>
  <button class="button sybau" id="back-to-mode-select2" onclick="returnToMenu()">Powr√≥t</button>
  <button class="button" id="next-chronology-btn" style="display:none;">Nastƒôpny</button>
  <div id="chronology-summary" style="display:none;"></div>
</div>

<!-- Sekcje, kt√≥re bƒôdƒÖ widoczne w odpowiednich momentach -->
<div id="flashcards" class="flashcards">
    <div id="flashcardContent"></div>
    <div class="input-group">
        <input type="text" id="userInput" placeholder="Wpisz swojƒÖ odpowied≈∫" autocomplete="off">
    </div>
    <div class="guziki">
    <button class="ch" onclick="checkAnswer()">Sprawd≈∫</button>
    <button id="forgot" class="for" onclick="dontRemember()">Nie pamiƒôtam</button>
   <container class="close"> <button id="close" class="zs" onclick="showSummary()">Zako≈Ñcz Sesjƒô</button></container></div>
    <container class="chart"><canvas id="resultsChart" width="100" height="100"> </canvas></container><div class="nadpaskowcy"><p id="round-info">Tura 1</p> <div class="time-display">
        <span id="live-timer">Czas: 00:00</span></div>
    </div>
    <div class="progress-container">
    <div id="progress-bar"></div>
    <p id="progress-text">0/0</p>
</div>
</div>

<div id="summary" class="summary">
    <h2>Podsumowanie</h2>
    <div id="summaryContent"></div>
    <div style="width: 100px; height: 100px; margin: 0 auto;">
    <canvas id="resultsChart2"></canvas>
</div>

    <div class="button-container">
        <button class="button" onclick="returnToMenu()">Powr√≥t do menu</button>
        <button id="retry-button" class="button" onclick="retryWrongAnswers()">Powt√≥rz b≈Çƒôdne odpowiedzi</button>
        <button id="show-details-btn" class="button">Zobacz szczeg√≥≈Çy</button>
<div id="details-section" style="display:none; margin-top:20px;"></div>

    </div>
</div>

<script src="script.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    document.getElementById('main-style').setAttribute('href', 'styles-mobile.css');
}
</script>
<button id="logout-btn" style="display:none;">Wyloguj</button>
<!-- Panel admina do manipulacji fiszkami -->
<div id="admin-panel" style="display:none; background:#333; color:#fff; padding:20px; margin:20px auto; max-width:400px; border-radius:10px;">
  <h2>Panel admina: Fiszki</h2>
  <h3>Dodaj nowƒÖ fiszkƒô</h3>
  <input id="admin-event" placeholder="Wydarzenie"><br>
  <input id="admin-date" placeholder="Data (np. 1569)"><br>
  <input id="admin-era" placeholder="Epoka (np. [xvi])"><br>
  <input id="admin-area" placeholder="Obszar (np. pl,uk,fr)"><br>
  <input id="admin-type" placeholder="Typ (np. po,wo)"><br>
  <input id="admin-dif" placeholder="Trudno≈õƒá (np. 1)"><br>
  <input id="admin-daydate" placeholder="Data dzienna (DD//MM//YYYY)"><br>
  <button id="admin-add-flashcard">Dodaj fiszkƒô</button>
  <hr>
  <h3>Dodaj/aktualizuj datƒô dziennƒÖ do istniejƒÖcej fiszki</h3>
  <input id="admin-update-id" placeholder="ID fiszki"><br>
  <input id="admin-update-daydate" placeholder="Data dzienna (DD//MM//YYYY)"><br>
  <button id="admin-update-daydate-btn">Aktualizuj datƒô dziennƒÖ</button>
  <div id="admin-msg" style="margin-top:10px;color:#FFD700;"></div>
</div>
</body>
</html>
